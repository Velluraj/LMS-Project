<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        function toggleForm(formType) {
            document.getElementById('student-form').style.display = formType === 'student' ? 'block' : 'none';
            document.getElementById('staff-form').style.display = formType === 'staff' ? 'block' : 'none';
            document.getElementById('reset-form').style.display = 'none';
        }

        function showResetForm(userType) {
            document.getElementById('student-form').style.display = 'none';
            document.getElementById('staff-form').style.display = 'none';
            document.getElementById('reset-form').style.display = 'block';

            document.getElementById('reset_user_type').value = userType;
        }
    </script>
</head>
<body>zz
    <h1>Login Portal</h1>
    <button onclick="toggleForm('student')">Student</button>
    <button onclick="toggleForm('staff')">Staff</button>

    <!-- Student Form -->
    <div id="student-form" style="display: block;">
        <h2>Student Login</h2>
        <form method="post">
            <input type="hidden" name="form_type" value="student_login">
            <label>Email: <input type="email" name="student_email" required></label><br>
            <label>Password: <input type="password" name="student_password" required></label><br>
            <button type="submit">Login</button>
            <button type="button" onclick="showResetForm('student')">Forgot Password?</button>
        </form>

        <h3>Student Signup</h3>
        <!-- Student Signup form stays same -->
        <form method="post">
            <input type="hidden" name="form_type" value="student_signup">
            <label>Name: <input type="text" name="student_name" required></label><br>
            <label>Register No: <input type="text" name="student_reg" required></label><br>
            <label>Batch:
                <select name="student_batch" required>
                    <option value="2025">2025</option>
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                </select>
            </label><br>
            <label>Email: <input type="email" name="student_email_signup" required></label><br>
            <label>Password: <input type="password" name="student_password_signup" required></label><br>
            <label>Confirm Password: <input type="password" name="student_confirm_password" required></label><br>
            <button type="submit">Signup</button>
        </form>
    
    </div>

    <!-- Staff Form -->
    <div id="staff-form" style="display: none;">
        <h2>Staff Login</h2>
        <form method="post">
            <input type="hidden" name="form_type" value="staff_login">
            <label>Staff Code: <input type="text" name="staff_code" required></label><br>
            <label>Department: <input type="text" name="staff_department" required></label><br>
            <label>Password: <input type="password" name="staff_password" required></label><br>
            <button type="submit">Login</button>
            <button type="button" onclick="showResetForm('staff')">Forgot Password?</button>
        </form>

        <h3>Staff Signup</h3>
        <!-- Staff Signup form stays same -->
         <form method="post">
            <input type="hidden" name="form_type" value="staff_signup">
            <label>Name: <input type="text" name="staff_name" required></label><br>
            <label>Staff Code: <input type="text" name="staff_code_signup" required></label><br>
            <label>Department: <input type="text" name="staff_department_signup" required></label><br>
            <label>Email: <input type="email" name="staff_email" required></label><br>
            <label>Password: <input type="password" name="staff_password_signup" required></label><br>
            <label>Confirm Password: <input type="password" name="staff_confirm_password" required></label><br>
            <button type="submit">Signup</button>
        </form>
    </div>

    <!-- Reset Password Form (Shared for Student and Staff) -->
    <div id="reset-form" style="display: none;">
        <h2>Reset Password</h2>
        <form method="post">
            <input type="hidden" name="form_type" value="reset_password_request">
            <input type="hidden" name="user_type" id="reset_user_type">
            <label>Email or ID: <input type="text" name="reset_identifier" required></label><br>
            <button type="submit">Verify</button>
        </form>

        <h3>Set New Password (After Verification)</h3>
        <form method="post">
            <input type="hidden" name="form_type" value="reset_password_confirm">
            <input type="hidden" name="user_type" id="reset_user_type_confirm">
            <label>New Password: <input type="password" name="new_password" required></label><br>
            <label>Confirm Password: <input type="password" name="confirm_password" required></label><br>
            <button type="submit">Reset Password</button>
            <button type="button" onclick="toggleForm('student')">Back to Login</button>
        </form>
    </div>
</body>
</html>
